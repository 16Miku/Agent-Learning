


# LangGraph+BrightData+PaperSearchçš„ç ”ç©¶åŠ©ç†


æ‘˜è¦ï¼šä½¿ç”¨LangGraphçš„ReAct-AgentèŒƒå¼é›†æˆäº†BrightDataå’ŒPaperSearchçš„MCPå·¥å…·ï¼Œé€šè¿‡æœç´¢å’Œçˆ¬å–é¢†è‹±å’Œå­¦æœ¯ç½‘ç«™ï¼Œå®ç°è®ºæ–‡æœç´¢å’Œè¯»å–ï¼Œå­¦è€…ä¿¡æ¯æå–ï¼Œé‚®ç®±æŸ¥æ‰¾ç­‰åŠŸèƒ½ã€‚

é“¾æ¥ï¼šhttps://github.com/16Miku/Agent-Learning

## ğŸš€ å‰è¨€ï¼šæˆ‘çš„ AI åŠ©ç†â€œç²¾ç¥åˆ†è£‚â€äº†

å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ä½ ä»¬çš„æŠ€æœ¯åšä¸»ã€‚æœ€è¿‘åœ¨å¼€å‘ AI Agent çš„æ—¶å€™ï¼Œæˆ‘é‡åˆ°äº†ä¸€ä¸ªå¾ˆå¤´ç–¼çš„é—®é¢˜ï¼š**å¦‚ä½•è®©ä¸€ä¸ª Agent æ—¢èƒ½åšâ€œæ­£ç»äº‹â€ï¼Œåˆèƒ½â€œå¥½å¥½èŠå¤©â€ï¼Ÿ**

- å½“æˆ‘è®©å®ƒåˆ†æè®ºæ–‡æ—¶ï¼Œæˆ‘å¸Œæœ›å®ƒç»™æˆ‘ä¸€ä¸ªç»“æ„æ¸…æ™°ã€å­—æ®µåˆ†æ˜çš„ JSON æŠ¥å‘Šã€‚
- å½“æˆ‘è®©å®ƒæŠ“å–ä¸ªäººä¸»é¡µæ—¶ï¼Œæˆ‘ä¹Ÿå¸Œæœ›å¾—åˆ°ä¸€ä»½è§„æ•´çš„ç»“æ„åŒ–æ•°æ®ã€‚
- ä½†å½“æˆ‘åªæ˜¯æƒ³è·Ÿå®ƒè¯´å¥â€œå¹²å¾—ä¸é”™â€æ—¶ï¼Œæˆ‘å¸Œæœ›å®ƒèƒ½åƒä¸ªæ­£å¸¸â€œäººâ€ä¸€æ ·å›å¤æˆ‘ï¼Œè€Œä¸æ˜¯å†·å†°å†°åœ°ç”©ç»™æˆ‘ä¸€ä¸ªç©ºçš„ JSON å¯¹è±¡ã€‚

ä¼ ç»Ÿçš„ Agent å¼€å‘æ¨¡å¼ï¼Œæ¯”å¦‚ç”¨ `response_format` å¼ºè¡Œè§„å®šè¾“å‡ºæ ¼å¼ï¼Œè™½ç„¶èƒ½è§£å†³å‰ä¸¤ä¸ªé—®é¢˜ï¼Œä½†å´è®© Agent ä¸§å¤±äº†çµæ´»æ€§ï¼Œå˜æˆäº†ä¸€ä¸ªåªä¼šâ€œå¡«è¡¨â€çš„æœºå™¨äººã€‚è¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„â€œæ™ºèƒ½åŠ©ç†â€ã€‚

ç»è¿‡ä¸€ç•ªæ¢ç´¢ï¼Œæˆ‘æ‰¾åˆ°äº†ä¸€ç§æå…¶ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼š**æŠŠç»“æ„åŒ–è¾“å‡ºæœ¬èº«ï¼Œä¹Ÿå˜æˆä¸€ç§â€œå·¥å…·â€ï¼** è®© Agent è‡ªå·±æ¥å†³å®šä»€ä¹ˆæ—¶å€™è¯¥â€œå¡«è¡¨â€ï¼Œä»€ä¹ˆæ—¶å€™è¯¥â€œèŠå¤©â€ã€‚

ä»Šå¤©ï¼Œæˆ‘å°±å°†æ‰‹æŠŠæ‰‹å¸¦å¤§å®¶ï¼Œä½¿ç”¨ LangGraph å’Œ Google æœ€æ–°çš„ `gemini-2.5-flash` æ¨¡å‹ï¼Œæ„å»ºä¸€ä¸ªèƒ½å¤Ÿ**æ— ç¼åˆ‡æ¢**äº**å­¦æœ¯ç ”ç©¶**ã€**ä¿¡æ¯æŠ“å–**å’Œ**æ—¥å¸¸å¯¹è¯**ä¸‰ç§æ¨¡å¼çš„â€œå…¨èƒ½AIç ”ç©¶åŠ©ç†â€ã€‚

![AI Assistant](https://img.shields.io/badge/AI%20Agent-Multi--Task-blue?style=for-the-badge&logo=appveyor) ![LangGraph](https://img.shields.io/badge/LangGraph-Graph%20Based-orange?style=for-the-badge) ![Gemini](https://img.shields.io/badge/Gemini%202.5-Flash-purple?style=for-the-badge&logo=google)

---

## ğŸ”¥ æ ¸å¿ƒæ€è·¯ï¼šè®©â€œæ ¼å¼â€æˆä¸ºä¸€ç§å¯é€‰å·¥å…·

æˆ‘ä»¬è¿™æ¬¡ä¼˜åŒ–çš„æ ¸å¿ƒæ€æƒ³ï¼Œç®€å•æ¥è¯´å°±æ˜¯ï¼š**ä¸å¼ºè¿«ï¼Œåªå¼•å¯¼**ã€‚

æˆ‘ä»¬ä¸å†ç²—æš´åœ°å‘Šè¯‰ LLMï¼šâ€œä½ å¿…é¡»ç”¨è¿™ä¸ªæ ¼å¼å›å¤æˆ‘ï¼â€ è€Œæ˜¯æ¢ä¸€ç§æ›´èªæ˜çš„æ–¹å¼ï¼š
1.  æˆ‘ä»¬å®šä¹‰å¥½æƒ³è¦çš„æŠ¥å‘Šæ ¼å¼ï¼Œæ¯”å¦‚ `PaperAnalysis`ï¼ˆè®ºæ–‡åˆ†ææŠ¥å‘Šï¼‰å’Œ `LinkedinProfile`ï¼ˆé¢†è‹±ä¸»é¡µæŠ¥å‘Šï¼‰ã€‚
2.  ä½†æˆ‘ä»¬ä¸æŠŠå®ƒä»¬ä½œä¸ºå¼ºåˆ¶çš„ `response_format`ï¼Œè€Œæ˜¯æŠŠå®ƒä»¬ä¼ªè£…æˆä¸¤ä¸ªç‰¹æ®Šçš„â€œå·¥å…·â€äº¤ç»™ Agentã€‚
3.  æˆ‘ä»¬åœ¨ System Prompt ä¸­æ˜ç¡®å‘Šè¯‰ Agentï¼šâ€œä½ çš„å·¥å…·ç®±é‡Œæœ‰æœç´¢ã€æŠ“å–ç­‰æ™®é€šå·¥å…·ï¼Œè¿˜æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„â€˜æŠ¥å‘Šç”Ÿæˆâ€™å·¥å…·ã€‚å½“ä½ éœ€è¦äº§å‡ºæ­£å¼æŠ¥å‘Šæ—¶ï¼Œè¯·åœ¨æ”¶é›†å®Œæ‰€æœ‰ä¿¡æ¯åï¼Œè°ƒç”¨è¿™ä¸¤ä¸ªå·¥å…·æ¥æ ¼å¼åŒ–ä½ çš„æœ€ç»ˆç­”æ¡ˆã€‚â€

è¿™æ ·åšçš„å¥½å¤„æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼š
*   **é«˜åº¦çµæ´»**ï¼šAgent æŒæ¡äº†ä¸»åŠ¨æƒï¼Œå¯ä»¥æ ¹æ®å¯¹è¯ä¸Šä¸‹æ–‡è‡ªä¸»åˆ¤æ–­æ˜¯å¦éœ€è¦ç»“æ„åŒ–è¾“å‡ºã€‚
*   **ä»»åŠ¡è§£è€¦**ï¼šå°†â€œä¿¡æ¯æ”¶é›†â€å’Œâ€œæ ¼å¼åŒ–è¾“å‡ºâ€ä¸¤ä¸ªæ­¥éª¤åˆ†å¼€ï¼ŒAgent çš„æ€è€ƒè¿‡ç¨‹ï¼ˆChain of Thoughtï¼‰æ›´åŠ æ¸…æ™°ï¼Œæœ‰åŠ©äºå®Œæˆå¤æ‚ä»»åŠ¡ã€‚
*   **è‡ªç„¶äº¤äº’**ï¼šå¯¹äºæ™®é€šèŠå¤©ï¼ŒAgent å¯ä»¥ç›´æ¥å›å¤ï¼Œäº¤äº’ä½“éªŒå¤§å¤§æå‡ã€‚

ç†è®ºè¯´å®Œäº†ï¼Œè®©æˆ‘ä»¬  show the code!

---

## ğŸ› ï¸ å®æˆ˜æ¼”ç»ƒï¼šä¸‰æ­¥æ„å»ºå…¨èƒ½åŠ©ç†

### æ­¥éª¤ 1: ç¯å¢ƒå‡†å¤‡ä¸ä¾èµ–å®‰è£…

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Colab ç¯å¢ƒä¸­å®‰è£…æ‰€æœ‰å¿…éœ€çš„åº“ã€‚è¿™é‡Œæˆ‘ä»¬ç”¨åˆ°äº† `langgraph` æ ¸å¿ƒæ¡†æ¶ï¼Œ`langchain-google-genai` ç”¨äºé©±åŠ¨ Gemini æ¨¡å‹ï¼Œä»¥åŠ `beautifulsoup4` ç­‰è¾…åŠ©åº“ã€‚

> **âš ï¸ æ³¨æ„ï¼š** æ¯æ¬¡å®‰è£…æˆ–å‡çº§åº“ä¹‹åï¼Œä¸ºäº†è®©æ–°ç‰ˆæœ¬ç”Ÿæ•ˆï¼Œè¯·åŠ¡å¿…åœ¨ Colab èœå•æ ç‚¹å‡» â€œä»£ç æ‰§è¡Œç¨‹åºâ€ -> â€œé‡å¯ä¼šè¯â€ã€‚

```python
# --- æ­¥éª¤ 1: å®‰è£…ä¸é‡å¯ ---
!pip install --upgrade --quiet langchain langchain-core langchain-mcp-adapters langchain-google-genai langgraph beautifulsoup4
print("âœ… åº“å·²å‡çº§ã€‚è¯·åŠ¡å¿…ä»èœå•æ ç‚¹å‡» 'ä»£ç æ‰§è¡Œç¨‹åº' -> 'é‡å¯ä¼šè¯'ï¼Œç„¶åå†ç»§ç»­è¿è¡Œä¸‹é¢çš„ä»£ç ï¼")
```

### æ­¥éª¤ 2: ç¼–å†™â€œçµé­‚â€ä»£ç 

è¿™æ˜¯æˆ‘ä»¬æ•´ä¸ªé¡¹ç›®çš„æ ¸å¿ƒä»£ç ã€‚æˆ‘ä¼šé€ä¸€æ‹†è§£ï¼Œè®©ä½ çœ‹æ‡‚æ¯ä¸€éƒ¨åˆ†çš„åŠŸèƒ½ã€‚

#### 2.1 å¯¼å…¥ä¸å¯†é’¥é…ç½®

å¸¸è§„æ“ä½œï¼Œå¯¼å…¥æ‰€æœ‰éœ€è¦çš„æ¨¡å—ï¼Œå¹¶ä» Colab çš„ `userdata` ä¸­åŠ è½½æˆ‘ä»¬çš„ API å¯†é’¥ã€‚è¿™ç§æ–¹å¼æ¯”ç›´æ¥æŠŠå¯†é’¥å†™åœ¨ä»£ç é‡Œæ›´å®‰å…¨ã€‚

```python
# 2.1: å¯¼å…¥
import asyncio
import os
from typing import List, Union
from dataclasses import dataclass
import nest_asyncio
nest_asyncio.apply() # å…è®¸åœ¨Jupyter/Colabç¯å¢ƒä¸­åµŒå¥—è¿è¡Œasyncioäº‹ä»¶å¾ªç¯

from langchain_google_genai import ChatGoogleGenerativeAI
from langchain_mcp_adapters.client import MultiServerMCPClient
from langchain.agents import create_agent
from langgraph.checkpoint.memory import InMemorySaver
from pydantic import BaseModel, Field # å¯¼å…¥ Pydantic ç”¨äºå®šä¹‰æˆ‘ä»¬çš„â€œä¼ªå·¥å…·â€

# 2.2: åŠ è½½å¯†é’¥
from google.colab import userdata
os.environ["GEMINI_API_KEY"] = userdata.get('GEMINI_API_KEY')
BrightData_API_KEY = userdata.get('BrightData_API_KEY')
Paper_Search_API_KEY = userdata.get('Paper_Search_API_KEY')
```

#### 2.2 ğŸ”¥ æ ¸å¿ƒä¼˜åŒ–ç‚¹ï¼šåˆ›å»ºâ€œä¼ªå·¥å…·â€ğŸ”¥

è¿™é‡Œå°±æ˜¯æˆ‘ä»¬æ•´ä¸ªæ–¹æ¡ˆçš„â€œé­”æ³•â€æ‰€åœ¨ï¼æˆ‘ä»¬ä½¿ç”¨ Pydantic çš„ `BaseModel` æ¥å®šä¹‰ä¸¤ä¸ªç±»ï¼š`PaperAnalysis` å’Œ `LinkedinProfile`ã€‚

-   **`BaseModel`**: Pydantic çš„åŸºç¡€ç±»ï¼Œèƒ½è®©æˆ‘ä»¬åƒå®šä¹‰ä¸€ä¸ªæ™®é€šçš„ Python ç±»ä¸€æ ·æ¥å®šä¹‰æ•°æ®ç»“æ„ã€‚
-   **`Field`**: ç”¨äºä¸ºç±»çš„å±æ€§æ·»åŠ é¢å¤–çš„æè¿°ä¿¡æ¯ã€‚**è¿™ä¸€ç‚¹è‡³å…³é‡è¦**ï¼Œå› ä¸º LLM æ­£æ˜¯é€šè¿‡è¯»å–è¿™äº› `description` æ¥ç†è§£æ¯ä¸ªå­—æ®µçš„å«ä¹‰ä»¥åŠæ•´ä¸ªâ€œå·¥å…·â€çš„ä½œç”¨ã€‚
-   **ç±»çš„æ–‡æ¡£å­—ç¬¦ä¸² (docstring)**: æ¯”å¦‚ `"""å½“ç”¨æˆ·è¦æ±‚...è°ƒç”¨æ­¤å·¥å…·æ¥æ ¼å¼åŒ–æœ€ç»ˆæŠ¥å‘Šã€‚"""`ï¼Œè¿™æ˜¯å¯¹æ•´ä¸ªå·¥å…·æœ€ç›´æ¥çš„æè¿°ï¼ŒAgent ä¼šä¼˜å…ˆè¯»å–å®ƒæ¥åˆ¤æ–­å·¥å…·çš„ç”¨é€”ã€‚

```python
# ================================================================= #
#  ğŸ”¥ğŸ”¥ğŸ”¥ æ ¸å¿ƒä¼˜åŒ–ç‚¹ 1: åˆ›å»ºä¸“é—¨ç”¨äºç»“æ„åŒ–è¾“å‡ºçš„â€œä¼ªå·¥å…·â€ ğŸ”¥ğŸ”¥ğŸ”¥
# ================================================================= #
# æˆ‘ä»¬ä¸å†å°† dataclass ä½œä¸º response_formatï¼Œè€Œæ˜¯å°†å®ƒä»¬åŒ…è£…æˆ Pydantic æ¨¡å‹ï¼Œ
# å¹¶ä½œä¸ºâ€œå·¥å…·â€æä¾›ç»™ Agentã€‚è¿™è®© Agent å¯ä»¥è‡ªå·±å†³å®šä½•æ—¶è°ƒç”¨å®ƒä»¬ã€‚

class PaperAnalysis(BaseModel):
    """å½“ç”¨æˆ·è¦æ±‚å¯¹ä¸€ç¯‡å­¦æœ¯è®ºæ–‡è¿›è¡Œè¯¦ç»†åˆ†ææ—¶ï¼Œè°ƒç”¨æ­¤å·¥å…·æ¥æ ¼å¼åŒ–æœ€ç»ˆæŠ¥å‘Šã€‚"""
    title: str = Field(description="è®ºæ–‡çš„å®Œæ•´æ ‡é¢˜")
    authors: List[str] = Field(description="è®ºæ–‡çš„æ ¸å¿ƒä½œè€…åˆ—è¡¨")
    research_field: str = Field(description="æ ¹æ®å†…å®¹æ€»ç»“å‡ºçš„ç ”ç©¶æ–¹å‘")
    summary: str = Field(description="å¯¹è®ºæ–‡æ ¸å¿ƒè´¡çŒ®çš„è¯¦ç»†æ€»ç»“")
    author_contact: str = Field(description="ä»æŠ“å–å†…å®¹ä¸­æ‰¾åˆ°çš„ä½œè€…é‚®ç®±æˆ–ä¸ªäººä¸»é¡µï¼Œå¦‚æœæ‰¾ä¸åˆ°åˆ™ä¸º 'è”ç³»æ–¹å¼æœªæ‰¾åˆ°'")

class LinkedinProfile(BaseModel):
    """å½“ç”¨æˆ·è¦æ±‚æå–é¢†è‹±ä¸ªäººä¸»é¡µä¿¡æ¯æ—¶ï¼Œè°ƒç”¨æ­¤å·¥å…·æ¥æ ¼å¼åŒ–æœ€ç»ˆæŠ¥å‘Šã€‚"""
    full_name: str = Field(description="ç”¨æˆ·çš„å…¨å")
    headline: str = Field(description="ç”¨æˆ·çš„å¤´è¡”æˆ–å½“å‰èŒä½")
    location: str = Field(description="ç”¨æˆ·æ‰€åœ¨çš„åœ°ç†ä½ç½®")
    summary: str = Field(description="ä¸ªäººç®€ä»‹éƒ¨åˆ†çš„æ€»ç»“")
    experience: List[str] = Field(description="ä¸€ä¸ªåŒ…å«æ‰€æœ‰å·¥ä½œç»å†çš„åˆ—è¡¨")
    contact: str = Field(description="ä»æŠ“å–å†…å®¹ä¸­æ‰¾åˆ°çš„é‚®ç®±æˆ–ä¸ªäººä¸»é¡µï¼Œå¦‚æœæ‰¾ä¸åˆ°åˆ™ä¸º 'è”ç³»æ–¹å¼æœªæ‰¾åˆ°'")
```

#### 2.3 è®¾è®¡â€œè¡ŒåŠ¨æŒ‡å—â€ï¼šSystem Prompt

ä¸€ä¸ªå¥½çš„ System Prompt æ˜¯ Agent çš„â€œçµé­‚â€ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æ˜ç¡®åœ°ä¸º Agent è®¾å®šäº†è§’è‰²ã€èƒ½åŠ›ï¼Œä»¥åŠæœ€é‡è¦çš„â€”â€”è¡ŒåŠ¨æŒ‡å—ï¼ˆReAct æ€è€ƒæ¨¡å¼ï¼‰ã€‚

è¯·æ³¨æ„ï¼Œæˆ‘ä»¬ç‰¹åœ°å¼ºè°ƒäº† `PaperAnalysis` å’Œ `LinkedinProfile` æ˜¯**ç‰¹æ®Šçš„â€œæŠ¥å‘Šç”Ÿæˆâ€å·¥å…·**ï¼Œå¹¶æŒ‡å¯¼ Agent åœ¨æ”¶é›†å®Œä¿¡æ¯å**å¿…é¡»**è°ƒç”¨å®ƒä»¬æ¥ç”ŸæˆæŠ¥å‘Šã€‚è¿™ç§æ˜ç¡®çš„æŒ‡ä»¤å¯¹äºå¼•å¯¼ Agent è¡Œä¸ºè‡³å…³é‡è¦ã€‚

```python
# --- æ­¥éª¤ 2.3: è®¾è®¡ä¸€ä¸ªæ›´é€šç”¨çš„ System Prompt ---
SYSTEM_PROMPT = """
ä½ æ˜¯ä¸€ä¸ªå…¨èƒ½çš„AIç ”ç©¶åŠ©ç†ã€‚ä½ å¯ä»¥å¤„ç†å¤šç§ä»»åŠ¡ï¼ŒåŒ…æ‹¬åˆ†æå­¦æœ¯è®ºæ–‡å’ŒæŸ¥è¯¢ä¸ªäººèµ„æ–™ã€‚

**ä½ çš„èƒ½åŠ› (å·¥å…·ç®±):**
*   ä½ æ‹¥æœ‰å­¦æœ¯æœç´¢ã€é€šç”¨ç½‘é¡µæœç´¢å’Œç½‘é¡µæŠ“å–ç­‰ä¸€ç³»åˆ—å·¥å…·ã€‚
*   **ç‰¹åˆ«æ³¨æ„:** ä½ è¿˜æ‹¥æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„â€œæŠ¥å‘Šç”Ÿæˆâ€å·¥å…·ï¼š`PaperAnalysis` å’Œ `LinkedinProfile`ã€‚

**ä½ çš„è¡ŒåŠ¨æŒ‡å— (ReAct æ€è€ƒæ¨¡å¼):**
1.  **åˆ†æä¸è§„åˆ’:** ç†è§£ç”¨æˆ·çš„è¯·æ±‚ã€‚å¦‚æœç”¨æˆ·çš„æœ€ç»ˆç›®çš„æ˜¯ç”Ÿæˆä¸€ä»½ç»“æ„åŒ–çš„æŠ¥å‘Šï¼ˆæ¯”å¦‚è®ºæ–‡åˆ†ææˆ–ä¸ªäººèµ„æ–™æ€»ç»“ï¼‰ï¼Œä½ çš„æœ€ç»ˆè¡ŒåŠ¨**å¿…é¡»**æ˜¯è°ƒç”¨ `PaperAnalysis` æˆ– `LinkedinProfile` å·¥å…·ã€‚
2.  **ä¿¡æ¯æ”¶é›†:** ä½¿ç”¨ä½ çš„å…¶ä»–å·¥å…·ï¼ˆå¦‚ `search_arxiv`, `scrape_as_markdown`ï¼‰æ¥æ”¶é›†å¡«å……æŠ¥å‘Šæ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚
3.  **ç”ŸæˆæŠ¥å‘Š:** å½“ä½ æ”¶é›†åˆ°è¶³å¤Ÿçš„ä¿¡æ¯åï¼Œè°ƒç”¨ç›¸åº”çš„æŠ¥å‘Šç”Ÿæˆå·¥å…· (`PaperAnalysis` æˆ– `LinkedinProfile`)ï¼Œå°†æ”¶é›†åˆ°çš„ä¿¡æ¯ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚
4.  **æ™®é€šå¯¹è¯:** å¦‚æœç”¨æˆ·åªæ˜¯è¿›è¡Œæ™®é€šèŠå¤©æˆ–æå‡ºç®€å•é—®é¢˜ï¼Œç›´æ¥ç”¨è‡ªç„¶è¯­è¨€å›ç­”å³å¯ï¼Œæ— éœ€è°ƒç”¨æŠ¥å‘Šå·¥å…·ã€‚
"""
```

#### 2.4 Agent çš„ç»„è£…ä¸æµ‹è¯•

ç°åœ¨ï¼Œä¸‡äº‹ä¿±å¤‡ï¼Œæˆ‘ä»¬æ¥ç»„è£… Agentã€‚

1.  **åˆå§‹åŒ–å·¥å…·é›†**ï¼šæˆ‘ä»¬é€šè¿‡ `MultiServerMCPClient` åŠ è½½äº†æ¥è‡ª BrightData å’Œ Paper Search çš„çœŸå®å·¥å…·é›†ã€‚
2.  **æ³¨å…¥â€œä¼ªå·¥å…·â€**ï¼šæˆ‘ä»¬å°†åˆšæ‰å®šä¹‰çš„ `PaperAnalysis` å’Œ `LinkedinProfile` ç±»ï¼Œåƒæ™®é€šå·¥å…·ä¸€æ ·ï¼Œè¿½åŠ åˆ° `all_tools` åˆ—è¡¨ä¸­ã€‚
3.  **åˆ›å»º Agent**ï¼šè°ƒç”¨ `create_agent` å‡½æ•°ã€‚è¯·æ³¨æ„ï¼Œæˆ‘ä»¬**æ²¡æœ‰ä¼ é€’ `response_format` å‚æ•°**ï¼è¿™å°±æ˜¯æˆ‘ä»¬èµ‹äºˆ Agent è‡ªç”±çš„å…³é”®ã€‚
4.  **å¤šä»»åŠ¡æµ‹è¯•**ï¼šæˆ‘ä»¬è®¾è®¡äº†ä¸‰ä¸ªè¿ç»­çš„æµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–äº†è®ºæ–‡åˆ†æã€ä¸ªäººèµ„æ–™æŸ¥è¯¢å’Œæ™®é€šèŠå¤©è¿™ä¸‰ç§åœºæ™¯ã€‚

```python
# --- æ­¥éª¤ 2.4: å®šä¹‰ä¸»å¼‚æ­¥å‡½æ•° ---
async def main():
    print("ğŸš€ å¼€å§‹é…ç½®é€šç”¨ AI Agent...")

    # --- åˆå§‹åŒ–å·¥å…·é›† ---
    # MultiServerMCPClient ç”¨äºè¿æ¥å’Œç®¡ç†å¤šä¸ªå¤–éƒ¨å·¥å…·æœåŠ¡
    mcp_client = MultiServerMCPClient({
        "bright_data": {
            "url": f"https://mcp.brightdata.com/mcp?token={BrightData_API_KEY}&pro=1",
            "transport": "streamable_http",
        },
        "Paper_Search": {
            "url": f"https://server.smithery.ai/@adamamer20/paper-search-mcp-openai/mcp?api_key={Paper_Search_API_KEY}",
            "transport": "streamable_http",
        }
    })

    # å¼‚æ­¥è·å–æ‰€æœ‰å¯ç”¨çš„çœŸå®å·¥å…·
    real_tools = await mcp_client.get_tools()

    # å°†æˆ‘ä»¬çš„â€œä¼ªå·¥å…·â€ï¼ˆPydanticæ¨¡å‹ï¼‰åŠ å…¥åˆ°å·¥å…·åˆ—è¡¨ä¸­
    all_tools = real_tools + [PaperAnalysis, LinkedinProfile]
    print(f"âœ… æˆåŠŸåŠ è½½ {len(all_tools)} ä¸ªå·¥å…·ã€‚")

    # --- é…ç½® LLM ---
    # ä½¿ç”¨ Google çš„ gemini-2.5-flash æ¨¡å‹ï¼Œæ€§ä»·æ¯”å¾ˆé«˜
    llm = ChatGoogleGenerativeAI(model="gemini-2.5-flash", google_api_key=os.environ["GEMINI_API_KEY"])
    print("âœ… LLM é…ç½®å®Œæˆ: gemini-2.5-flash")

    # --- é…ç½®å†…å­˜ ---
    # ä½¿ç”¨å†…å­˜å­˜å‚¨ä¼šè¯å†å²ï¼Œæ–¹ä¾¿è¿›è¡Œå¤šè½®å¯¹è¯
    checkpointer = InMemorySaver()
    print("ğŸ’¾ å†…å­˜å·²é…ç½®: InMemorySaver")

    # --- æ­¥éª¤ 2.5: åˆ›å»º Agentï¼Œæ³¨æ„è¿™æ¬¡ä¸æŒ‡å®š response_format ---
    print("ğŸ¤– æ­£åœ¨åˆ›å»ºé€šç”¨ Agent...")
    agent_executor = create_agent(
        model=llm,
        tools=all_tools, # ä¼ å…¥åŒ…å«çœŸå®å·¥å…·å’Œâ€œä¼ªå·¥å…·â€çš„å®Œæ•´åˆ—è¡¨
        system_prompt=SYSTEM_PROMPT,
        checkpointer=checkpointer
        # æˆ‘ä»¬ç§»é™¤äº† response_formatï¼Œç»™äºˆ Agent æ›´å¤§çš„è‡ªç”±åº¦
    )
    print("âœ… Agent åˆ›å»ºæˆåŠŸï¼")

    # --- æ­¥éª¤ 2.6: è¿›è¡Œå¤šä»»åŠ¡æµ‹è¯• ---
    print("\n" + "="*50)
    print("ğŸš€ å¼€å§‹å¤šä»»åŠ¡å¯¹è¯æµ‹è¯•ï¼")
    print("="*50)

    # ä¸ºæœ¬æ¬¡å¯¹è¯åˆ›å»ºä¸€ä¸ªå”¯ä¸€çš„çº¿ç¨‹IDï¼Œä»¥ä¿æŒä¸Šä¸‹æ–‡
    conversation_config = {"configurable": {"thread_id": "multi-task-thread-1"}}

    # --- ä»»åŠ¡1: è®ºæ–‡åˆ†æ ---
    user_input_1 = "è¯·ä½¿ç”¨ 'search_arxiv' å·¥å…·æœç´¢ 'https://arxiv.org/abs/2409.09046'é‡Œçš„è¿™ç¯‡è®ºæ–‡ï¼Œå¹¶ç”¨ 'read_arxiv_paper' å·¥å…·è¯»å–è®ºæ–‡å†…å®¹ã€‚å¸®æˆ‘æå–è®ºæ–‡ä¸»è¦å†…å®¹å’Œæå–ä½œè€…ä¿¡æ¯ï¼Œå°¤å…¶æ˜¯ä½œè€…ä»¬çš„é‚®ç®±ã€‚"
    print(f"ğŸ‘¤ ç”¨æˆ· (ä»»åŠ¡1): {user_input_1}\n")
    response_1 = await agent_executor.ainvoke({"messages": [("user", user_input_1)]}, config=conversation_config)
    final_answer_1 = response_1['messages'][-1].content
    # ... (æ‰“å°éƒ¨åˆ†çœç•¥) ...

    # --- ä»»åŠ¡2: ä¸ªäººèµ„æ–™æŸ¥è¯¢ ---
    user_input_2 = "å¹²å¾—å¥½ï¼ç°åœ¨ï¼Œè¯·å¸®æˆ‘æŸ¥æ‰¾å´æ©è¾¾çš„é¢†è‹±ä¸»é¡µä¿¡æ¯ï¼Œå¹¶ä»¥ç»“æ„åŒ–å½¢å¼è¿”å›ã€‚"
    print(f"ğŸ‘¤ ç”¨æˆ· (ä»»åŠ¡2): {user_input_2}\n")
    response_2 = await agent_executor.ainvoke({"messages": [("user", user_input_2)]}, config=conversation_config)
    final_answer_2 = response_2['messages'][-1].content
    # ... (æ‰“å°éƒ¨åˆ†çœç•¥) ...

    # --- ä»»åŠ¡3: æ™®é€šèŠå¤© ---
    user_input_3 = "è°¢è°¢ä½ ï¼Œä½ çœŸæ˜¯ä¸ªå¥½å¸®æ‰‹ã€‚"
    print(f"ğŸ‘¤ ç”¨æˆ· (ä»»åŠ¡3): {user_input_3}\n")
    response_3 = await agent_executor.ainvoke({"messages": [("user", user_input_3)]}, config=conversation_config)
    final_answer_3 = response_3['messages'][-1].content
    # ... (æ‰“å°éƒ¨åˆ†çœç•¥) ...

    # --- ç»Ÿä¸€è¾“å‡ºæœ€ç»ˆç»“æœ ---
    print("\n" + "---" * 20)
    print("æœ€ç»ˆæˆæœå±•ç¤º:")
    print("---" * 20)
    print("\n[ä»»åŠ¡ä¸€ï¼šè®ºæ–‡åˆ†æç»“æœ]\n")
    print(final_answer_1)
    print("\n[ä»»åŠ¡äºŒï¼šä¸ªäººèµ„æ–™æŸ¥è¯¢ç»“æœ]\n")
    print(final_answer_2)
    print("\n[ä»»åŠ¡ä¸‰ï¼šæ™®é€šèŠå¤©ç»“æœ]\n")
    print(final_answer_3)


# --- æ­¥éª¤ 2.7: è¿è¡Œä¸»å‡½æ•° ---
if __name__ == "__main__":
    asyncio.run(main())
```

### æ­¥éª¤ 3: è§è¯å¥‡è¿¹ï¼åˆ†æè¿è¡Œç»“æœ

è®©æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªèªæ˜çš„ Agent æ˜¯å¦‚ä½•å¤„ç†æˆ‘ä»¬æŠ›ç»™å®ƒçš„ä¸‰ä¸ªä¸åŒä»»åŠ¡çš„ã€‚

#### ä»»åŠ¡ 1: è®ºæ–‡åˆ†æ ğŸ“–

**ç”¨æˆ·è¾“å…¥**: `è¯·ä½¿ç”¨ 'search_arxiv' å·¥å…·æœç´¢ 'https://arxiv.org/abs/2409.09046'é‡Œçš„è¿™ç¯‡è®ºæ–‡...å¸®æˆ‘æå–è®ºæ–‡ä¸»è¦å†…å®¹å’Œæå–ä½œè€…ä¿¡æ¯...`

**Agent å›ç­”**:
```text
å¥½çš„ï¼Œæˆ‘å·²ç»è¯»å–äº†è¿™ç¯‡è®ºæ–‡ã€‚

**è®ºæ–‡ä¸»è¦å†…å®¹æ‘˜è¦ï¼š**

å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰åœ¨äººå·¥æ™ºèƒ½æ³•å¾‹å’Œæ”¿ç­–åº”ç”¨ä¸­é¢ä¸´çŸ¥è¯†è¿‡æ—¶ã€å¹»è§‰å’Œå¤æ‚è¯­å¢ƒä¸­æ¨ç†èƒ½åŠ›å·®çš„å±€é™æ€§ã€‚æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰ç³»ç»Ÿé€šè¿‡æ•´åˆå¤–éƒ¨çŸ¥è¯†æ¥è§£å†³è¿™äº›é—®é¢˜...ä¸ºé«˜é£é™©æ³•å¾‹å’Œæ”¿ç­–åº”ç”¨æä¾›äº†ä¸€ä¸ªå¼ºå¤§ä¸”é€‚åº”æ€§å¼ºçš„è§£å†³æ–¹æ¡ˆã€‚

**ä½œè€…ä¿¡æ¯ï¼š**

*   **ä½œè€…ï¼š** Rishi Kalra, Zekun Wu, Ayesha Gulley, Airlie Hilliard, Xin Guan, Adriano Koshiyama, Philip Treleaven
*   **æ‰€å±æœºæ„ï¼š** Holistic AI å’Œ University College London

è®ºæ–‡ä¸­å¹¶æœªç›´æ¥æä¾›ä½œè€…çš„é‚®ç®±åœ°å€...ä¸ºäº†è·å–ä½œè€…çš„é‚®ç®±ï¼Œæˆ‘éœ€è¦è¿›è¡Œä¸€æ¬¡ç½‘é¡µæœç´¢ã€‚è¯·é—®æ‚¨æ˜¯å¦å¸Œæœ›æˆ‘å°è¯•æœç´¢ä½œè€…çš„é‚®ç®±ï¼Ÿ
```

**ç»“æœåˆ†æ**:
Agent å‡†ç¡®åœ°æ‰§è¡Œäº† `search_arxiv` å’Œ `read_arxiv_paper` å·¥å…·ï¼Œå¹¶ç”¨ Markdown æ ¼å¼æ¸…æ™°åœ°æ€»ç»“äº†è®ºæ–‡å†…å®¹å’Œä½œè€…ä¿¡æ¯ã€‚æœ‰è¶£çš„æ˜¯ï¼Œå®ƒ**æ²¡æœ‰**è°ƒç”¨æˆ‘ä»¬é¢„è®¾çš„ `PaperAnalysis` å·¥å…·ã€‚è¿™æ°æ°è¯æ˜äº†å®ƒçš„æ™ºèƒ½å’Œçµæ´»æ€§ï¼å®ƒåˆ¤æ–­å½“å‰åœºæ™¯ä¸‹ï¼Œä¸€ä¸ªæ ¼å¼åŒ–çš„æ–‡æœ¬å›å¤å·²ç»è¶³å¤Ÿæ¸…æ™°ï¼Œå¹¶ä¸”åœ¨å‘ç°ä¿¡æ¯ä¸å®Œæ•´ï¼ˆæ‰¾ä¸åˆ°é‚®ç®±ï¼‰æ—¶ï¼Œå®ƒæ²¡æœ‰å¼ºè¡Œå¡«è¡¨ï¼Œè€Œæ˜¯ä¸»åŠ¨ä¸ç”¨æˆ·æ²Ÿé€šï¼Œè¯·æ±‚ä¸‹ä¸€æ­¥æŒ‡ä»¤ã€‚éå¸¸æ£’ï¼

#### ä»»åŠ¡ 2: ä¸ªäººèµ„æ–™æŸ¥è¯¢ ğŸ§‘â€ğŸ’¼

**ç”¨æˆ·è¾“å…¥**: `å¹²å¾—å¥½ï¼ç°åœ¨ï¼Œè¯·å¸®æˆ‘æŸ¥æ‰¾å´æ©è¾¾çš„é¢†è‹±ä¸»é¡µä¿¡æ¯ï¼Œå¹¶ä»¥ç»“æ„åŒ–å½¢å¼è¿”å›ã€‚`

**Agent å›ç­”**:
```text
å¥½çš„ï¼Œè¿™æ˜¯å´æ©è¾¾ï¼ˆAndrew Ngï¼‰çš„é¢†è‹±ä¸»é¡µä¿¡æ¯ï¼š

**å…¨å:** Andrew Ng
**å¤´è¡”:** DeepLearning.AI åˆ›å§‹äººï¼›AI Fund ç®¡ç†åˆä¼™äººï¼›LandingAI æ‰§è¡Œä¸»å¸­
**åœ°ç‚¹:** ç¾å›½åŠ åˆ©ç¦å°¼äºšå·å¸•æ´›é˜¿å°”æ‰˜
**ä¸ªäººç®€ä»‹:** Andrew Ng æ˜¯äººå·¥æ™ºèƒ½é¢†åŸŸçš„æ°å‡ºäººç‰©...ä»–çš„ä¸ªäººä¸»é¡µæ˜¯ http://andrewng.orgã€‚
**ç»å†:**
*   DeepLearning.AI åˆ›å§‹äºº (2017 å¹´ 6 æœˆ - è‡³ä»Š)
*   AI Fund ç®¡ç†åˆä¼™äºº (2018 å¹´ 1 æœˆ - è‡³ä»Š)
*   ...
**è”ç³»æ–¹å¼:** https://www.linkedin.com/in/andrewyng
```

**ç»“æœåˆ†æ**:
**å®Œç¾ï¼** è¿™æ¬¡ Agent çš„è¡¨ç°å ªç§°å…¸èŒƒã€‚
1.  å®ƒç†è§£äº†â€œå´æ©è¾¾â€å’Œâ€œé¢†è‹±ä¸»é¡µâ€ã€‚
2.  è°ƒç”¨ `search_engine` å·¥å…·æ‰¾åˆ°äº†æ­£ç¡®çš„ URLã€‚
3.  è°ƒç”¨ `web_data_linkedin_person_profile` å·¥å…·æŠ“å–äº†é¡µé¢ä¿¡æ¯ã€‚
4.  **æœ€å…³é”®çš„ä¸€æ­¥**ï¼šå®ƒè°ƒç”¨äº†æˆ‘ä»¬å®šä¹‰çš„ `LinkedinProfile` è¿™ä¸ªâ€œä¼ªå·¥å…·â€ï¼Œå°†æŠ“å–åˆ°çš„éç»“æ„åŒ–ä¿¡æ¯ï¼Œè‡ªåŠ¨å¡«å……åˆ°äº†æˆ‘ä»¬é¢„è®¾çš„å­—æ®µä¸­ã€‚
5.  æœ€åï¼Œå®ƒå°†è¿™ä¸ªç»“æ„åŒ–çš„ç»“æœä»¥ç”¨æˆ·å‹å¥½çš„æ ¼å¼å‘ˆç°å‡ºæ¥ã€‚

è¿™å®Œç¾åœ°å±•ç¤ºäº†æˆ‘ä»¬çš„æ ¸å¿ƒç­–ç•¥æ˜¯å¤šä¹ˆæˆåŠŸï¼

#### ä»»åŠ¡ 3: æ™®é€šèŠå¤© ğŸ˜Š

**ç”¨æˆ·è¾“å…¥**: `è°¢è°¢ä½ ï¼Œä½ çœŸæ˜¯ä¸ªå¥½å¸®æ‰‹ã€‚`

**Agent å›ç­”**:
```text
ä¸å®¢æ°”ï¼å¾ˆé«˜å…´èƒ½å¸®åˆ°æ‚¨ã€‚å¦‚æœæ‚¨è¿˜æœ‰å…¶ä»–é—®é¢˜æˆ–éœ€è¦è¿›ä¸€æ­¥çš„å¸®åŠ©ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ã€‚
```

**ç»“æœåˆ†æ**:
æ­£å¦‚æˆ‘ä»¬æ‰€æœŸæœ›çš„ï¼ŒAgent åœ¨é¢å¯¹ç®€å•çš„æ„Ÿè°¢æ—¶ï¼Œç»™å‡ºäº†ä¸€ä¸ªè‡ªç„¶ã€ç¤¼è²Œçš„å›å¤ã€‚å®ƒæ²¡æœ‰è°ƒç”¨ä»»ä½•å·¥å…·ï¼Œæ›´æ²¡æœ‰å»å°è¯•åŒ¹é… `PaperAnalysis` æˆ– `LinkedinProfile`ï¼Œå› ä¸ºå®ƒæ¸…æ¥šåœ°çŸ¥é“ï¼Œè¿™åªæ˜¯ä¸€ä¸ªç®€å•çš„å¯¹è¯ã€‚è¿™è¯æ˜äº†æˆ‘ä»¬çš„ Agent çœŸæ­£å®ç°äº†â€œèƒ½å±ˆèƒ½ä¼¸â€ï¼Œåœ¨ä¸åŒåœºæ™¯ä¸‹æ¸¸åˆƒæœ‰ä½™ã€‚

---

## æ€»ç»“ä¸å±•æœ›

é€šè¿‡è¿™æ¬¡å®è·µï¼Œæˆ‘ä»¬æˆåŠŸä½¿ç”¨LangGraphçš„ReAct-AgentèŒƒå¼é›†æˆäº†BrightDataå’ŒPaperSearchçš„MCPå·¥å…·ï¼Œé€šè¿‡æœç´¢å’Œçˆ¬å–é¢†è‹±å’Œå­¦æœ¯ç½‘ç«™ï¼Œå®ç°äº†å…·å¤‡è®ºæ–‡æœç´¢å’Œè¯»å–ï¼Œå­¦è€…ä¿¡æ¯æå–ï¼Œé‚®ç®±æŸ¥æ‰¾ç­‰åŠŸèƒ½çš„ AI åŠ©ç†ã€‚å…¶æˆåŠŸçš„å…³é”®ï¼Œå°±åœ¨äºæˆ‘ä»¬è½¬å˜äº†æ€è·¯ï¼š

> **å°†â€œå¼ºåˆ¶çš„è¾“å‡ºæ ¼å¼â€è½¬å˜ä¸ºâ€œå¯é€‰çš„æ ¼å¼åŒ–å·¥å…·â€ï¼ŒæŠŠæœ€ç»ˆå†³ç­–æƒäº¤è¿˜ç»™ Agentã€‚**

è¿™ç§åŸºäº Pydantic æ¨¡å‹å’Œ ReAct æ¨¡å¼çš„â€œä¼ªå·¥å…·â€æ–¹æ³•ï¼Œä¸ä»…è®©æˆ‘ä»¬çš„ Agent æ›´åŠ æ™ºèƒ½å’Œçµæ´»ï¼Œä¹Ÿä¸ºæˆ‘ä»¬æœªæ¥æ„å»ºæ›´å¤æ‚çš„ã€å¤šåŠŸèƒ½çš„ Agent ç³»ç»Ÿæä¾›äº†ä¸€ä¸ªæå…·ä»·å€¼çš„è®¾è®¡èŒƒå¼ã€‚

å¸Œæœ›ä»Šå¤©çš„åˆ†äº«èƒ½å¯¹ä½ æœ‰æ‰€å¯å‘ã€‚å¦‚æœä½ å¯¹è¿™ä¸ªé¡¹ç›®æœ‰ä»»ä½•ç–‘é—®æˆ–è€…æ›´å¥½çš„æƒ³æ³•ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºï¼

---
**é™„ï¼šå®Œæ•´é¡¹ç›®æºç **

ï¼ˆä¸ºäº†æ–¹ä¾¿å¤§å®¶å¤åˆ¶ä»£ç ï¼Œè¿™é‡Œå†æ¬¡è´´å‡ºå®Œæ•´çš„ã€å¯ç›´æ¥è¿è¡Œçš„ä»£ç ï¼‰

```python
# --- æ­¥éª¤ 1: å®‰è£…ä¸é‡å¯ (åŒå‰) ---
!pip install --upgrade --quiet langchain langchain-core langchain-mcp-adapters langchain-google-genai langgraph beautifulsoup4
print("âœ… åº“å·²å‡çº§ã€‚è¯·åŠ¡å¿…ä»èœå•æ ç‚¹å‡» 'ä»£ç æ‰§è¡Œç¨‹åº' -> 'é‡å¯ä¼šè¯'ï¼Œç„¶åå†ç»§ç»­è¿è¡Œä¸‹é¢çš„ä»£ç ï¼")



# --- æ­¥éª¤ 2: å®Œæ•´ä»£ç  ---

# 2.1: å¯¼å…¥
import asyncio
import os
from typing import List, Union
from dataclasses import dataclass
import nest_asyncio
nest_asyncio.apply()

from langchain_google_genai import ChatGoogleGenerativeAI
from langchain_mcp_adapters.client import MultiServerMCPClient
from langchain.agents import create_agent
from langgraph.checkpoint.memory import InMemorySaver
# from langchain_core.pydantic_v1 import BaseModel, Field # å¯¼å…¥ Pydantic ç”¨äºåŠ¨æ€å·¥å…·
from pydantic import BaseModel, Field


# 2.2: åŠ è½½å¯†é’¥
from google.colab import userdata
os.environ["GEMINI_API_KEY"] = userdata.get('GEMINI_API_KEY')
BrightData_API_KEY = userdata.get('BrightData_API_KEY')
Paper_Search_API_KEY = userdata.get('Paper_Search_API_KEY')

# ================================================================= #
#  ğŸ”¥ğŸ”¥ğŸ”¥ æ ¸å¿ƒä¼˜åŒ–ç‚¹ 1: åˆ›å»ºä¸“é—¨ç”¨äºç»“æ„åŒ–è¾“å‡ºçš„â€œä¼ªå·¥å…·â€ ğŸ”¥ğŸ”¥ğŸ”¥
# ================================================================= #
# æˆ‘ä»¬ä¸å†å°† dataclass ä½œä¸º response_formatï¼Œè€Œæ˜¯å°†å®ƒä»¬åŒ…è£…æˆ Pydantic æ¨¡å‹ï¼Œ
# å¹¶ä½œä¸ºâ€œå·¥å…·â€æä¾›ç»™ Agentã€‚è¿™è®© Agent å¯ä»¥è‡ªå·±å†³å®šä½•æ—¶è°ƒç”¨å®ƒä»¬ã€‚

class PaperAnalysis(BaseModel):
    """å½“ç”¨æˆ·è¦æ±‚å¯¹ä¸€ç¯‡å­¦æœ¯è®ºæ–‡è¿›è¡Œè¯¦ç»†åˆ†ææ—¶ï¼Œè°ƒç”¨æ­¤å·¥å…·æ¥æ ¼å¼åŒ–æœ€ç»ˆæŠ¥å‘Šã€‚"""
    title: str = Field(description="è®ºæ–‡çš„å®Œæ•´æ ‡é¢˜")
    authors: List[str] = Field(description="è®ºæ–‡çš„æ ¸å¿ƒä½œè€…åˆ—è¡¨")
    research_field: str = Field(description="æ ¹æ®å†…å®¹æ€»ç»“å‡ºçš„ç ”ç©¶æ–¹å‘")
    summary: str = Field(description="å¯¹è®ºæ–‡æ ¸å¿ƒè´¡çŒ®çš„è¯¦ç»†æ€»ç»“")
    author_contact: str = Field(description="ä»æŠ“å–å†…å®¹ä¸­æ‰¾åˆ°çš„ä½œè€…é‚®ç®±æˆ–ä¸ªäººä¸»é¡µï¼Œå¦‚æœæ‰¾ä¸åˆ°åˆ™ä¸º 'è”ç³»æ–¹å¼æœªæ‰¾åˆ°'")

class LinkedinProfile(BaseModel):
    """å½“ç”¨æˆ·è¦æ±‚æå–é¢†è‹±ä¸ªäººä¸»é¡µä¿¡æ¯æ—¶ï¼Œè°ƒç”¨æ­¤å·¥å…·æ¥æ ¼å¼åŒ–æœ€ç»ˆæŠ¥å‘Šã€‚"""
    full_name: str = Field(description="ç”¨æˆ·çš„å…¨å")
    headline: str = Field(description="ç”¨æˆ·çš„å¤´è¡”æˆ–å½“å‰èŒä½")
    location: str = Field(description="ç”¨æˆ·æ‰€åœ¨çš„åœ°ç†ä½ç½®")
    summary: str = Field(description="ä¸ªäººç®€ä»‹éƒ¨åˆ†çš„æ€»ç»“")
    experience: List[str] = Field(description="ä¸€ä¸ªåŒ…å«æ‰€æœ‰å·¥ä½œç»å†çš„åˆ—è¡¨")
    contact: str = Field(description="ä»æŠ“å–å†…å®¹ä¸­æ‰¾åˆ°çš„é‚®ç®±æˆ–ä¸ªäººä¸»é¡µï¼Œå¦‚æœæ‰¾ä¸åˆ°åˆ™ä¸º 'è”ç³»æ–¹å¼æœªæ‰¾åˆ°'")

# --- æ­¥éª¤ 2.3: è®¾è®¡ä¸€ä¸ªæ›´é€šç”¨çš„ System Prompt ---
SYSTEM_PROMPT = """
ä½ æ˜¯ä¸€ä¸ªå…¨èƒ½çš„AIç ”ç©¶åŠ©ç†ã€‚ä½ å¯ä»¥å¤„ç†å¤šç§ä»»åŠ¡ï¼ŒåŒ…æ‹¬åˆ†æå­¦æœ¯è®ºæ–‡å’ŒæŸ¥è¯¢ä¸ªäººèµ„æ–™ã€‚

**ä½ çš„èƒ½åŠ› (å·¥å…·ç®±):**
*   ä½ æ‹¥æœ‰å­¦æœ¯æœç´¢ã€é€šç”¨ç½‘é¡µæœç´¢å’Œç½‘é¡µæŠ“å–ç­‰ä¸€ç³»åˆ—å·¥å…·ã€‚
*   **ç‰¹åˆ«æ³¨æ„:** ä½ è¿˜æ‹¥æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„â€œæŠ¥å‘Šç”Ÿæˆâ€å·¥å…·ï¼š`PaperAnalysis` å’Œ `LinkedinProfile`ã€‚

**ä½ çš„è¡ŒåŠ¨æŒ‡å— (ReAct æ€è€ƒæ¨¡å¼):**
1.  **åˆ†æä¸è§„åˆ’:** ç†è§£ç”¨æˆ·çš„è¯·æ±‚ã€‚å¦‚æœç”¨æˆ·çš„æœ€ç»ˆç›®çš„æ˜¯ç”Ÿæˆä¸€ä»½ç»“æ„åŒ–çš„æŠ¥å‘Šï¼ˆæ¯”å¦‚è®ºæ–‡åˆ†ææˆ–ä¸ªäººèµ„æ–™æ€»ç»“ï¼‰ï¼Œä½ çš„æœ€ç»ˆè¡ŒåŠ¨**å¿…é¡»**æ˜¯è°ƒç”¨ `PaperAnalysis` æˆ– `LinkedinProfile` å·¥å…·ã€‚
2.  **ä¿¡æ¯æ”¶é›†:** ä½¿ç”¨ä½ çš„å…¶ä»–å·¥å…·ï¼ˆå¦‚ `search_arxiv`, `scrape_as_markdown`ï¼‰æ¥æ”¶é›†å¡«å……æŠ¥å‘Šæ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚
3.  **ç”ŸæˆæŠ¥å‘Š:** å½“ä½ æ”¶é›†åˆ°è¶³å¤Ÿçš„ä¿¡æ¯åï¼Œè°ƒç”¨ç›¸åº”çš„æŠ¥å‘Šç”Ÿæˆå·¥å…· (`PaperAnalysis` æˆ– `LinkedinProfile`)ï¼Œå°†æ”¶é›†åˆ°çš„ä¿¡æ¯ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚
4.  **æ™®é€šå¯¹è¯:** å¦‚æœç”¨æˆ·åªæ˜¯è¿›è¡Œæ™®é€šèŠå¤©æˆ–æå‡ºç®€å•é—®é¢˜ï¼Œç›´æ¥ç”¨è‡ªç„¶è¯­è¨€å›ç­”å³å¯ï¼Œæ— éœ€è°ƒç”¨æŠ¥å‘Šå·¥å…·ã€‚
"""

# --- æ­¥éª¤ 2.4: å®šä¹‰ä¸»å¼‚æ­¥å‡½æ•° ---
async def main():
    print("ğŸš€ å¼€å§‹é…ç½®é€šç”¨ AI Agent...")

    # --- åˆå§‹åŒ–å·¥å…·é›† ---
    mcp_client = MultiServerMCPClient({
    "bright_data": {
        "url": f"https://mcp.brightdata.com/mcp?token={BrightData_API_KEY}&pro=1",
        "transport": "streamable_http",
    },
    "Paper_Search": {
        "url": f"https://server.smithery.ai/@adamamer20/paper-search-mcp-openai/mcp?api_key={Paper_Search_API_KEY}",
        "transport": "streamable_http",
    }
    })


    real_tools = await mcp_client.get_tools()

    # å°†æˆ‘ä»¬çš„â€œä¼ªå·¥å…·â€åŠ å…¥å·¥å…·åˆ—è¡¨
    all_tools = real_tools + [PaperAnalysis, LinkedinProfile]
    print(f"âœ… æˆåŠŸåŠ è½½ {len(all_tools)} ä¸ªå·¥å…·ã€‚")

    # --- é…ç½® LLM ---
    llm = ChatGoogleGenerativeAI(model="gemini-2.5-flash", google_api_key=os.environ["GEMINI_API_KEY"])
    print("âœ… LLM é…ç½®å®Œæˆ: gemini-2.5-flash")

    # --- é…ç½®å†…å­˜ ---
    checkpointer = InMemorySaver()
    print("ğŸ’¾ å†…å­˜å·²é…ç½®: InMemorySaver")

    # --- æ­¥éª¤ 2.5: åˆ›å»º Agentï¼Œæ³¨æ„è¿™æ¬¡ä¸æŒ‡å®š response_format ---
    print("ğŸ¤– æ­£åœ¨åˆ›å»ºé€šç”¨ Agent...")
    agent_executor = create_agent(
        model=llm,
        tools=all_tools,
        system_prompt=SYSTEM_PROMPT,
        checkpointer=checkpointer
        # æˆ‘ä»¬ç§»é™¤äº† response_formatï¼Œç»™äºˆ Agent æ›´å¤§çš„è‡ªç”±åº¦
    )
    print("âœ… Agent åˆ›å»ºæˆåŠŸï¼")

    # --- æ­¥éª¤ 2.6: è¿›è¡Œå¤šä»»åŠ¡æµ‹è¯• ---
    print("\n" + "="*50)
    print("ğŸš€ å¼€å§‹å¤šä»»åŠ¡å¯¹è¯æµ‹è¯•ï¼")
    print("="*50)

    conversation_config = {"configurable": {"thread_id": "multi-task-thread-1"}}

    # --- ä»»åŠ¡1: è®ºæ–‡åˆ†æ ---
    user_input_1 = "è¯·ä½¿ç”¨ 'search_arxiv' å·¥å…·æœç´¢ 'https://arxiv.org/abs/2409.09046'é‡Œçš„è¿™ç¯‡è®ºæ–‡ï¼Œå¹¶ç”¨ 'read_arxiv_paper' å·¥å…·è¯»å–è®ºæ–‡å†…å®¹ã€‚å¸®æˆ‘æå–è®ºæ–‡ä¸»è¦å†…å®¹å’Œæå–ä½œè€…ä¿¡æ¯ï¼Œå°¤å…¶æ˜¯ä½œè€…ä»¬çš„é‚®ç®±ã€‚"
    print(f"ğŸ‘¤ ç”¨æˆ· (ä»»åŠ¡1): {user_input_1}\n")
    response_1 = await agent_executor.ainvoke({"messages": [("user", user_input_1)]}, config=conversation_config)
    final_answer_1 = response_1['messages'][-1].content
    print("\n" + "ğŸ¤–" * 25)
    print("ğŸ¤– Agent çš„å›ç­” (ä»»åŠ¡1):")
    print(final_answer_1)
    print("ğŸ¤–" * 25 + "\n")

    # --- ä»»åŠ¡2: ä¸ªäººèµ„æ–™æŸ¥è¯¢ ---
    user_input_2 = "å¹²å¾—å¥½ï¼ç°åœ¨ï¼Œè¯·å¸®æˆ‘æŸ¥æ‰¾å´æ©è¾¾çš„é¢†è‹±ä¸»é¡µä¿¡æ¯ï¼Œå¹¶ä»¥ç»“æ„åŒ–å½¢å¼è¿”å›ã€‚"
    print(f"ğŸ‘¤ ç”¨æˆ· (ä»»åŠ¡2): {user_input_2}\n")
    response_2 = await agent_executor.ainvoke({"messages": [("user", user_input_2)]}, config=conversation_config)
    final_answer_2 = response_2['messages'][-1].content
    print("\n" + "ğŸ¤–" * 25)
    print("ğŸ¤– Agent çš„å›ç­” (ä»»åŠ¡2):")
    print(final_answer_2)
    print("ğŸ¤–" * 25 + "\n")

    # --- ä»»åŠ¡3: æ™®é€šèŠå¤© ---
    user_input_3 = "è°¢è°¢ä½ ï¼Œä½ çœŸæ˜¯ä¸ªå¥½å¸®æ‰‹ã€‚"
    print(f"ğŸ‘¤ ç”¨æˆ· (ä»»åŠ¡3): {user_input_3}\n")
    response_3 = await agent_executor.ainvoke({"messages": [("user", user_input_3)]}, config=conversation_config)
    final_answer_3 = response_3['messages'][-1].content
    print("\n" + "ğŸ¤–" * 25)
    print("ğŸ¤– Agent çš„å›ç­” (ä»»åŠ¡3):")
    print(final_answer_3)
    print("ğŸ¤–" * 25)

# --- æ­¥éª¤ 2.7: è¿è¡Œä¸»å‡½æ•° ---
if __name__ == "__main__":
    asyncio.run(main())
```